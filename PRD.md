# LitGoal - 독서 분량 설정기 PRD (Product Requirements Document)

## 1. 제품 개요

### 1.1 제품명

**LitGoal** - 독서 분량 설정기

### 1.2 제품 비전

개인의 독서 목표를 체계적으로 관리하고 지속적인 독서 습관을 형성할 수 있도록 돕는 모바일 애플리케이션

### 1.3 제품 목표

- 사용자가 독서 목표를 설정하고 진행 상황을 추적할 수 있는 환경 제공
- 독서 습관 형성을 위한 시각적 피드백 및 동기부여 시스템 구축
- 개인 맞춤형 독서 계획 수립 지원

### 1.4 대상 사용자

- **주요 타겟**: 독서 습관을 기르고 싶은 성인 (20-40대)
- **세부 타겟**:
  - 독서 목표를 세우고 체계적으로 관리하고 싶은 사람
  - 독서 진행 상황을 시각적으로 확인하고 싶은 사람
  - 독서 기록을 남기고 관리하고 싶은 사람

## 2. 기술 스택

### 2.1 프론트엔드

- **Framework**: Flutter 3.5.3
- **언어**: Dart
- **아키텍처**: MVVM 패턴
- **상태 관리**: Provider 6.1.2

### 2.2 백엔드

- **데이터베이스**: Supabase (PostgreSQL)
- **인증**: Supabase Auth (향후 구현 예정)
- **실시간 동기화**: Supabase Realtime

### 2.3 외부 API

- **도서 검색**: 알라딘 API
- **HTTP 통신**: http 1.1.0

### 2.4 기타 라이브러리

- **환경 변수**: flutter_dotenv 5.1.0
- **UI 아이콘**: cupertino_icons 1.0.8

## 3. 핵심 기능

### 3.1 독서 시작 기능

**목적**: 새로운 독서 목표 설정 및 책 등록

**주요 기능**:

- 도서 검색 (알라딘 API 연동)
- 독서 시작일 및 목표 완독일 설정
- 책 정보 자동 입력 (제목, 저자, 이미지, 총 페이지 수)
- 독서 목표 저장

**사용자 플로우**:

1. 홈 화면에서 "새 독서 시작" 버튼 클릭
2. 책 제목 입력 및 검색
3. 검색 결과에서 책 선택
4. 독서 계획 설정 (시작일, 목표일)
5. 독서 목표 저장

### 3.2 홈 화면 (독서 현황 대시보드)

**목적**: 현재 진행 중인 독서 상황을 한눈에 파악

**주요 기능**:

- 최근 독서 중인 책 정보 표시
- 현재 진행률 표시 (페이지 기준)
- 독서 목표 달성까지 남은 일수 표시
- 오늘의 독서 메모 기능 (향후 구현 예정)

**화면 구성**:

- 책 표지 이미지 (200x280 크기)
- 책 제목 및 저자 정보
- 진행률 표시 (현재 페이지 / 총 페이지)
- D-day 카운터 및 진행률 퍼센트
- 메모 그리드 (3x3, 향후 기능 확장 예정)

### 3.3 독서 목록 관리

**목적**: 모든 독서 기록을 체계적으로 관리

**주요 기능**:

- 전체 독서 목록 조회
- 진행 중인 독서와 완독한 책 분류
- 책별 상세 정보 확인
- 독서 진행 상황 업데이트

**화면 구성**:

- 독서 목록 리스트 뷰
- 진행 중 완독 섹션
- 완독 도서 섹션
- 각 책의 썸네일 및 기본 정보

### 3.4 독서 상세 정보

**목적**: 개별 책의 상세 정보 및 진행 상황 관리

**주요 기능**:

- 책 상세 정보 표시
- 현재 페이지 업데이트
- 독서 진행률 시각화
- 독서 목표 달성 여부 확인

### 3.5 캘린더 뷰

**목적**: 독서 기록을 날짜별로 시각화

**현재 상태**: 기본 UI 구현 완료
**향후 계획**:

- 일별 독서 기록 표시
- 독서 목표 달성 현황 표시
- 독서 패턴 분석

## 4. 데이터 모델

### 4.1 Book 모델

```dart
class Book {
  final String? id;           // UUID (Supabase 자동 생성)
  final String title;         // 책 제목
  final String? author;       // 저자
  final DateTime startDate;   // 독서 시작일
  final DateTime targetDate;  // 목표 완독일
  final String? imageUrl;     // 책 표지 이미지 URL
  final int currentPage;      // 현재 읽은 페이지
  final int totalPages;       // 총 페이지 수
  final DateTime? createdAt;  // 생성일시
  final DateTime? updatedAt;  // 수정일시
}
```

### 4.2 BookSearchResult 모델

```dart
class BookSearchResult {
  final String title;         // 책 제목
  final String author;        // 저자
  final String? imageUrl;     // 책 표지 이미지 URL
  final int? totalPages;      // 총 페이지 수
  final String? isbn;         // ISBN
}
```

## 5. 데이터베이스 설계

### 5.1 books 테이블

| 컬럼명       | 타입      | 제약조건      | 설명               |
| ------------ | --------- | ------------- | ------------------ |
| id           | UUID      | PRIMARY KEY   | 기본키 (자동 생성) |
| title        | TEXT      | NOT NULL      | 책 제목            |
| author       | TEXT      | NULL          | 저자               |
| start_date   | TIMESTAMP | NOT NULL      | 독서 시작일        |
| target_date  | TIMESTAMP | NOT NULL      | 목표 완독일        |
| image_url    | TEXT      | NULL          | 책 이미지 URL      |
| current_page | INTEGER   | DEFAULT 0     | 현재 읽은 페이지   |
| total_pages  | INTEGER   | DEFAULT 0     | 총 페이지 수       |
| created_at   | TIMESTAMP | DEFAULT NOW() | 생성일시           |
| updated_at   | TIMESTAMP | DEFAULT NOW() | 수정일시           |

### 5.2 인덱스 설계

- `idx_books_created_at`: 생성일시 기준 정렬 최적화
- `idx_books_start_date`: 시작일 기준 검색 최적화
- `idx_books_target_date`: 목표일 기준 검색 최적화

## 6. 아키텍처 설계

### 6.1 전체 아키텍처

- **패턴**: MVVM (Model-View-ViewModel)
- **계층 구조**: 3-Layer Architecture
  - UI Layer: 화면 표시 및 사용자 상호작용
  - Domain Layer: 비즈니스 로직 및 데이터 모델
  - Data Layer: 데이터 접근 및 외부 API 통신

### 6.2 폴더 구조

```
lib/
├── ui/                     # UI Layer
│   ├── core/ui/           # 공통 UI 컴포넌트
│   ├── home/              # 홈 화면
│   ├── book/              # 책 관련 화면
│   ├── reading/           # 독서 관련 화면
│   └── calendar/          # 캘린더 화면
├── domain/models/         # 도메인 모델
├── data/                  # Data Layer
│   ├── repositories/      # 데이터 접근 추상화
│   └── services/          # 외부 API 및 데이터 서비스
├── config/                # 앱 설정
├── utils/                 # 유틸리티 함수
└── routing/               # 라우팅 설정
```

### 6.3 상태 관리

- **Provider 패턴** 사용
- **ViewModel**: `ChangeNotifier` 상속
- **의존성 주입**: `MultiProvider`를 통한 관리

## 7. 사용자 인터페이스

### 7.1 네비게이션 구조

- **Bottom Navigation Bar**: 3개 탭
  - 홈: 현재 독서 현황 대시보드
  - 독서 목록: 전체 독서 기록 관리
  - 캘린더: 날짜별 독서 기록 조회

### 7.2 플로팅 액션 버튼

- **위치**: 우측 하단
- **기능**: 드롭다운 메뉴 표시
- **메뉴 항목**: "새 독서 시작"

### 7.3 디자인 시스템

- **기본 색상**: 블루 계열 (Colors.blue)
- **배경색**: 흰색 (Colors.white)
- **폰트**: 시스템 기본 폰트
- **카드 스타일**: 라운드 코너 + 그림자 효과

## 8. 외부 연동

### 8.1 알라딘 API

- **목적**: 도서 검색 및 정보 조회
- **엔드포인트**:
  - 도서 검색: `ItemSearch.aspx`
  - 도서 상세 정보: `ItemLookUp.aspx`
- **응답 포맷**: JSON
- **주요 데이터**: 제목, 저자, 표지 이미지, 페이지 수, ISBN

### 8.2 Supabase 연동

- **데이터베이스**: PostgreSQL
- **실시간 동기화**: Supabase Realtime
- **인증**: 향후 구현 예정
- **보안**: Row Level Security (RLS) 적용

## 9. 성능 및 최적화

### 9.1 이미지 최적화

- **책 표지 이미지**: 캐싱 및 지연 로딩
- **플레이스홀더**: 이미지 로드 실패 시 기본 아이콘 표시

### 9.2 데이터 캐싱

- **BookService**: 싱글톤 패턴으로 메모리 캐싱
- **로컬 캐시**: 앱 재시작 시까지 유지

### 9.3 네트워크 최적화

- **에러 핸들링**: try-catch 블록으로 예외 처리
- **로딩 상태**: 사용자 경험 개선을 위한 로딩 인디케이터

## 10. 보안 고려사항

### 10.1 API 키 관리

- **환경 변수**: `.env` 파일을 통한 민감 정보 관리
- **버전 관리**: `.env` 파일은 `.gitignore`에 포함

### 10.2 데이터베이스 보안

- **RLS**: Row Level Security 활성화
- **현재 정책**: 모든 사용자 접근 허용 (개발 단계)
- **향후 계획**: 사용자 인증 기반 접근 제어

## 11. 테스트 전략

### 11.1 단위 테스트

- **ViewModel**: 비즈니스 로직 테스트
- **Repository**: 데이터 접근 로직 테스트
- **Service**: 외부 API 통신 테스트

### 11.2 위젯 테스트

- **화면별 UI 테스트**: 각 화면의 위젯 렌더링 검증
- **상호작용 테스트**: 버튼 클릭, 입력 등 사용자 액션 테스트

### 11.3 통합 테스트

- **전체 플로우**: 독서 등록부터 완독까지의 전체 과정 테스트
- **데이터 동기화**: Supabase와의 실시간 동기화 테스트

## 12. 배포 및 운영

### 12.1 플랫폼

- **Android**: Google Play Store
- **iOS**: Apple App Store

### 12.2 환경 설정

- **개발 환경**: `.env` 파일 기반 설정
- **프로덕션 환경**: 환경별 설정 파일 분리 필요

### 12.3 모니터링

- **에러 추적**: 콘솔 로그 기반 (향후 Crashlytics 도입 예정)
- **성능 모니터링**: Flutter DevTools 활용

## 13. 향후 개발 계획

### 13.1 단기 계획 (1-2개월)

- [ ] 사용자 인증 시스템 구현
- [ ] 독서 메모 기능 추가
- [ ] 캘린더 기능 완성
- [ ] 독서 통계 기능 추가

### 13.2 중기 계획 (3-6개월)

- [ ] 소셜 기능 (독서 목표 공유)
- [ ] 독서 챌린지 시스템
- [ ] 독서 패턴 분석 및 인사이트 제공
- [ ] 푸시 알림 시스템

### 13.3 장기 계획 (6개월 이상)

- [ ] AI 기반 독서 추천 시스템
- [ ] 독서 커뮤니티 기능
- [ ] 독서 목표 달성 리워드 시스템
- [ ] 다국어 지원

## 14. 비즈니스 모델

### 14.1 수익 모델

- **프리미엄 구독**: 고급 통계, 무제한 책 등록 등
- **광고**: 배너 광고 (무료 사용자 대상)
- **제휴**: 온라인 서점과의 제휴 수수료

### 14.2 핵심 지표 (KPI)

- **사용자 활성도**: 일일/월간 활성 사용자 수
- **독서 목표 달성률**: 사용자별 목표 달성 비율
- **앱 사용 지속률**: 사용자 리텐션 비율
- **독서 등록 건수**: 월간 신규 독서 등록 수

## 15. 리스크 및 대응 방안

### 15.1 기술적 리스크

- **외부 API 의존성**: 알라딘 API 서비스 중단 시 대체 API 준비
- **데이터베이스 성능**: 사용자 증가에 따른 성능 최적화 필요
- **크로스 플랫폼 이슈**: iOS/Android 플랫폼별 테스트 강화

### 15.2 비즈니스 리스크

- **경쟁사 등장**: 차별화된 기능 지속 개발
- **사용자 이탈**: 사용자 피드백 기반 지속적 개선
- **수익 모델 검증**: 다양한 수익 모델 실험 및 검증

---

**문서 버전**: 1.0  
**작성일**: 2024년 12월  
**최종 수정일**: 2024년 12월  
**작성자**: AI Assistant  
**검토자**: 개발팀
